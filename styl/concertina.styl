/* $Id$ */

/*
 * A horizontal or vertical collapsable menu.
 *
 * When operating vertically, this collapses all items except the .current one,
 * leaving just that visible. So it's effectively a sort of makeshift combobox.
 *
 * Use with expander.js for @class updates.
 *
 * Intended for use as a drop-down navigation menu for narrow mobile devices,
 * but could perhaps hold other content too.
 */

$concertina-border   ?= $menu-border || 2px;
$concertina-colour   ?= $menu-colour || #000;
$concertina-height   ?= $menu-height || 1em;
$concertina-time     ?= $menu-time   || .25s;

concertina-layout(type) {
	margin:  0;
	padding: 0;

	border-bottom: solid $concertina-border $concertina-colour;

	li {
		margin:  0;
		padding: 0;

		if (type == vertical) {
			display: block;
		} else {
			display: inline-block;
		}
	}

	if (type == vertical) {
		li.current a {
			trigram();
		}

		&.expanded li,
		&.collapsed li {
			transition: max-height $concertina-time ease-in-out;
			overflow: hidden;
		}

		&.expanded li,
		&.collapsed li.current {
			max-height: $concertina-height;
		}

		&.collapsed li {
			max-height: 0;
		}

		border-bottom-width: 0;

		transition: border-bottom-width ($concertina-time * 0.75) ease-in-out;

		&.expanded {
			border-bottom-width: $concertina-border;
		}
	}
}

